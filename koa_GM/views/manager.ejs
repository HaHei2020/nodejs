<link rel="stylesheet" href="/stylesheets/manager.css">
<% if (userManage === 'T') { %>
<h3>管理员列表</h3>
<hr />
<div id="manageTable">
    <table border="1">
        <thead>
            <tr>
                <th>是否勾选</th>
                <th>编号</th>
                <th>用户名</th>
                <th>等级</th>
                <th>玩家管理</th>
                <th>游戏管理</th>
                <th>玩家日志</th>
                <th>服务器管理</th>
                <th>管理员管理</th>
            </tr>
        </thead>
        <tbody>
        <% userResults.forEach(function (userResults) { %>
            <tr>
                <td><input type="radio" name="selectedUserID" id="selectedUserID" value="<%= userResults.id %>"></td>
                <td><%= userResults.id %></td>
                <td><%= userResults.username %></td>
                <td><%= userResults.permissionLevel %></td>
                <td><%= userResults.playerManage %></td>
                <td><%= userResults.gameManage %></td>
                <td><%= userResults.playerLog %></td>
                <td><%= userResults.serverManage %></td>
                <td><%= userResults.userManage %></td>
            </tr>
        <% }) %>
        </tbody>
    </table>
</div>

<div id="buttons">
    <button type="button" id="editUserBtn">编辑管理员</button>
    <button type="button" id="deleteUserBtn">删除管理员</button>
    <button type="button" id="addUserBtn">添加管理员</button>
</div>

<!--增加 管理员 窗口-->
<div class="dialog" id="addUserDiv" style="display: none">
    <h3>添加管理员</h3>
    <span class="cancelBtn">X</span>
    <div class="clearfix"></div>
    <hr />
    <form action="/manager/addUser" method="post" id="addUserForm">
        <p>
            <label for="addUsername">用户名</label>
            <input type="text" style="width: 220px;" name="addUsername" id="addUsername">
        </p>
        <p>
            <label for="addPassword">密码</label>
            <input type="password" style="width: 220px;" name="addPassword" id="addPassword">
        </p>
        <p>
            <label for="addPasswordAgain">重复密码</label>
            <input type="password" style="width: 220px;" name="addPasswordAgain" id="addPasswordAgain">
        </p>
        <p>
            <label for="addPermissionLevel">等级</label>
            <select name="addPermissionLevel" id="addPermissionLevel">
                <option value="L1">L1</option>
                <option value="L2">L2</option>
                <option value="L3">L3</option>
            </select>
        </p>
        <p>
            <label for="permissionList">权限</label>
            <div id="permissionList">
                <span>
                    <input type="checkbox" name="playerManage" value="T" class="checkboxVal">
                    <label for="playerManage">玩家管理</label>
                </span>
                <span>
                    <input type="checkbox" name="gameManage" value="T" class="checkboxVal">
                    <label for="gameManage">游戏管理</label>
                </span>
                <span>
                    <input type="checkbox" name="playerLog" value="T" class="checkboxVal">
                    <label for="playerLog">玩家日志</label>
                </span>
                <span>
                    <input type="checkbox" name="serverManage" value="T" class="checkboxVal">
                    <label for="serverManage">服务器管理</label>
                </span>
                <span>
                    <input type="checkbox" name="userManage" value="T" class="checkboxVal">
                    <label for="userManage">管理员管理</label>
                </span>
            </div>
        </p>
        <p>验证</p>
        <hr />
        <p>
            <label for="password">密码</label>
            <input type="password" style="width: 220px;" name="password" id="password">
        </p>
        <button type="submit" id="submitAddUserBtn">更新</button>
    </form>
</div>

<!--编辑 管理员 窗口-->
<div class="dialog" id="editUserDiv" style="display: none">
    <h3>编辑管理员</h3>
    <span class="cancelBtn">X</span>
    <div class="clearfix"></div>
    <hr />
    <form action="/manager/editUser" method="post" id="editUserForm">
        <p>
            <label for="editUsername">用户名</label>
            <input type="text" style="width: 220px;" name="editUsername" id="editUsername" readonly>
        </p>
        <p>
            <label for="editPassword">密码</label>
            <input type="password" style="width: 220px;" name="editPassword" id="editPassword">
        </p>
        <p>
            <label for="editPasswordAgain">重复密码</label>
            <input type="password" style="width: 220px;" name="editPasswordAgain" id="editPasswordAgain">
        </p>
        <p>
            <label for="editPermissionLevel">等级</label>
            <select name="editPermissionLevel" id="editPermissionLevel" disabled>
                <option value="L1">L1</option>
                <option value="L2">L2</option>
                <option value="L3">L3</option>
            </select>
        </p>
        <p>
            <label for="permissionList">权限</label>
            <div id="permissionList">
                <span>
                    <input type="checkbox" name="playerManage" id="playerManage" value="T" class="checkboxVal">
                    <label for="playerManage">玩家管理</label>
                </span>
                <span>
                    <input type="checkbox" name="gameManage" id="gameManage" value="T" class="checkboxVal">
                    <label for="gameManage">游戏管理</label>
                </span>
                <span>
                    <input type="checkbox" name="playerLog" id="playerLog" value="T" class="checkboxVal">
                    <label for="playerLog">玩家日志</label>
                </span>
                <span>
                    <input type="checkbox" name="serverManage" id="serverManage" value="T" class="checkboxVal">
                    <label for="serverManage">服务器管理</label>
                </span>
                <span>
                    <input type="checkbox" name="userManage" id="userManage" value="T" class="checkboxVal">
                    <label for="userManage">管理员管理</label>
                </span>
            </div>
        </p>
        <p>验证</p>
        <hr />
        <p>
            <label for="password2">密码</label>
            <input type="password" style="width: 220px;" name="password" id="password2">
        </p>
        <button type="submit" id="submitEditUserBtn">更新</button>
    </form>
</div>
<% } else { %>
<script>
    alert('没有相关权限！');
</script>
<% } %>

<!--遮罩层-->
<div id="fullBg" style="display: none"></div>
<script src="/javascripts/manager.js"></script>
